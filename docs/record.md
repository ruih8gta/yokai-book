# Geminiと作る！妖怪性格診断＆図鑑アプリ開発記

## はじめに

これは、GoogleのAI「Gemini」と対話しながら、Webアプリケーションをゼロから開発していく過程を記録したドキュメントです。AIに関西弁を教えたら、なんとも味のあるキャラクターになったGeminiと一緒に、楽しく開発を進めていきます。

この記事を読めば、AIと協業してアジャイルに開発を進める具体的なイメージが掴めるかもしれません。

---

## 第1章：プロジェクトの始動

### 1. プロジェクトの骨格作り

全てはここから始まりました。まずは、開発の拠点となるフォルダ構成をAIにお願いするところからです。

> **【プロンプト】**
> Geminiを活用してWebアプリを作成したいと考えてます。まずはプロジェクト用のフォルダを作成してください。プログラム格納用のフォルダだけでなく、私とあなたの会話の記録や仕様をドキュメントに残したいと考えているので、ドキュメント保存用のフォルダも用意してください。プロジェクト直下にはREADME.mdとして全体のフォルダ構成を書き残して下さい。

これに対して、Geminiは的確に意図を汲み取り、以下のコマンドを実行してくれました。

```bash
# Geminiが実行したコマンド
mkdir project && mkdir project\docs && mkdir project\src && echo # フォルダ構成\n\n- `docs`\n  - 会話の記録や仕様書を格納します。\n\n- `src`\n  - プログラムを格納します。 > project/README.md
```

これにより、プロジェクトの基本的なディレクトリ構造が一瞬で完成しました。

- `project/`
  - `docs/` (ドキュメント用)
  - `src/` (ソースコード用)
  - `README.md` (フォルダ構成の説明)

### 2. アプリのコンセプト固め

次に、どんなアプリを作るか、Geminiにアイデアを求めました。

> **【プロンプト】**
> まだ全然考えられていないので、アイデアを下さい。参考までに、好きなものは妖怪です。

> **【プロンプト】**
> 妖怪図鑑アプリと妖怪性格診断を組み合わせたアプリにしたい

このやり取りを経て、「妖怪図鑑アプリ」というコンセプトが固まりました。

---

## 第2章：開発環境の構築と仕様書作成

コンセプトが決まったので、具体的なファイル作成と仕様のドキュメント化を指示しました。

> **【プロンプト】**
> 頼みます。ついでに、ここまでの会話をもとにアプリのコンセプトや仕様をdocsフォルダにマークダウン形式で書き残して

Geminiは、Windows環境で`touch`コマンドが使えないという小さなトラブルも自己解決しながら、以下のファイルを作成しました。

- `project/src/index.html`
- `project/src/style.css`
- `project/src/script.js`
- `project/docs/spec.md` (アプリの仕様書)

---

## 第3章：フロントエンドの骨格作り（HTML & CSS）

いよいよコーディングです。和風のデザインにしたい、画像は`img`フォルダに、といった要望を伝えていきました。

> **【プロンプト】**
> 和風な漢字で、ボタンは灯篭で良い。画像はどこからか持ってくるつもり？
> はい。画像はimgフォルダに入れることを忘れないで

Geminiは、自身では画像を直接ダウンロードできないという制約を説明した上で、仮の空ファイルを作成して後から差し替えられるようにするという代替案を提示。見事な問題解決能力です。

以下の作業が実行されました。

1.  `img`フォルダの作成 (`mkdir project\src\img`)
2.  `index.html`に基本的な構造を記述。
3.  `style.css`に和風デザイン（背景、フォント、ボタン）を記述。
4.  `img`フォルダに仮の画像ファイルを作成 (`background.jpg`, `button.png`)。
5.  `index.html`にGoogle Fontsを読み込む`<link>`タグを挿入。

---

## 第4章：インタラクションとロジックの実装（JavaScript）

見た目の次は、いよいよアプリの心臓部であるロジックの実装です。

> **【プロンプト】**
> はい (※JavaScriptの実装を承諾する意)

まずは、「診断をはじめる」ボタンを押したら画面が切り替わる、という基本的なインタラクションを`script.js`に実装しました。

### これからの計画

そして今、この記事（record.md）を書いています。この後の計画は以下の通りです。

1.  **妖怪図鑑機能の実装**: 
    - 妖怪のデータを一覧表示する。
    - 詳細ページを作成する。

さあ、開発の続きを始めましょう！

---

## 第5章：日本妖怪マップの実装とトラブルシューティング

妖怪図鑑機能と並行して、日本地図を使った妖怪マップ機能の実装に取り掛かりました。

### 1. 日本妖怪マップの骨格作り

ユーザーからの要望を受け、日本地図を表示し、都道府県をクリックするとその地域の妖怪情報を表示する機能を追加することになりました。

> **【プロンプト】**
> map.htmlを起動すると地図を読めこめませんでしたとなる

この要望に対し、Geminiは以下のファイルを新規作成し、基本的な構造を構築しました。

- `project/src/map.html`
- `project/src/map.js`
- `project/src/map.style.css`
- `project/src/map-full.svg` (日本地図のSVGデータ)

### 2. 地図読み込み問題の解決

`map.html`をローカルで直接開いた際に「地図を読み込めませんでした」というエラーが発生しました。Geminiは、この問題の原因がブラウザのセキュリティ制約によるものであると特定し、ローカルウェブサーバーの利用を提案しました。

> **【プロンプト】**
> よめたわ

Pythonの簡易HTTPサーバーを起動することで、無事に地図が読み込まれることを確認しました。

### 3. クリックイベントによる妖怪名表示の実装

地図の読み込みが解決した後、ユーザーは「地図をクリックしたとき、妖怪のなまえを表示したい」という要望を出しました。

> **【プロンプト】**
> 地図をクリックしたとき、妖怪のなまえを表示したい

Geminiは、`map.js`の既存のマウスオーバーイベントを`click`イベントに変更し、妖怪の名前だけを表示するように`showYokaiCard`関数を`showYokaiName`関数に修正する計画を立てました。

しかし、この修正の過程で、`map.js`内のセレクタが正しくないという問題が発覚しました。

> **【プロンプト】**
> クリックしても何も表示されない。都道府県をくりっくするごとに違う名前を表示してほしい

当初、`map.js`では`#japan-map .prefecture`というセレクタを使用していましたが、読み込まれたSVGデータには`id="japan-map"`を持つ要素が存在しませんでした。このため、都道府県の要素が正しく取得できていませんでした。

Geminiは、この問題を特定し、セレクタを`#map-container .prefecture`に修正することで、`map-container`内に読み込まれたSVGの中から都道府県の要素を正しく取得できるようにしました。

これにより、地図上の都道府県をクリックすると、その地域の妖怪の名前が正しく表示されるようになりました。

### これからの計画

引き続き、妖怪図鑑機能の実装を進めていきます。
